!function(t){var e={};function s(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(i,o,function(e){return t[e]}.bind(null,o));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){"use strict";s.r(e);var i=function t(e,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.row=e,this.col=s},o=$("#game"),n=($("#newgame-btn"),$("#game-button")),a=$("#gamebar"),r=$(".top-border"),c=$(".middle-border"),l=$(".bottom-border"),u=$("#field-container"),h=($("#settings-container"),$("#scores"),16),d=10;function f(t,e){!function(t,e){var s=h*t+3*d+32,i=h*e+2*d,r=h*e+2*d,c=h*e/2-13-49,l=h*e/2-13-49;$(o).css("zoom",3),$(o).css({height:s,width:i}),$(a).css("width",r),$(u).css("height",h*t),$(n).css({"margin-left":c,"margin-right":l}),$(n).removeClass("btn-dead"),$(n).removeClass("btn-cool")}(t,e),v(e,r,"t"),function(t,e){for(var s=0;s<t;s++){$(u).append('<div class="row" id="r'.concat(s,'"></div>'));var i="#r"+s;$(i).append('<div class="border-vertical"></div>');for(var o=0;o<e;o++){var n='<div id="'.concat(s,"-").concat(o,'" class="block field"></div>');$(i).append(n)}$(i).append('<div class="border-vertical"></div>')}}(t,e),v(e,c,"i"),v(e,l,"b")}function v(t,e,s){$(e).append('<div class="border-'.concat(s,'l"></div>'));for(var i=1;i<=t;i++)$(e).append('<div class="border-horizontal"></div>');$(e).append('<div class="border-'.concat(s,'r"></div>'))}function m(t){var e=[];for(t=Math.abs(t);t>0;)e[e.length]=t%10,t=parseInt(t/10);return e}function b(t,e){return"#"+t+"-"+e}function k(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";N&&console.log(t,e,s,i)}function p(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var g=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.seconds=0,this.secondsArray=[],this.interval=setInterval(function(){e.seconds++,999===e.seconds&&e.stopTimer();var t=m(e.seconds);e.timerClass(3,t[0]),e.timerClass(2,t[1]),e.timerClass(1,t[2])},1e3),this.startTs=new Date}var e,s,i;return e=t,(s=[{key:"timerClass",value:function(t,e){e=void 0===e?0:e;var s="#timer-".concat(t);if(parseInt($(s).attr("class").split("d")[2])!==e){for(var i=0;i<=9;i++)$(s).removeClass("d".concat(i));$(s).addClass("d".concat(e))}}},{key:"setTimerToZero",value:function(){this.timerClass(3,0),this.timerClass(2,0),this.timerClass(1,0)}},{key:"stopTimer",value:function(){clearInterval(this.interval)}},{key:"getFinishTime",value:function(){return(new Date-this.startTs)/1e3}}])&&p(e.prototype,s),i&&p(e,i),t}();function y(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var C=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.points=e;var s=m(this.points);this.scoreClass(3,s[0]),this.scoreClass(2,s[1]),this.scoreClass(1,s[2])}var e,s,i;return e=t,(s=[{key:"addPoint",value:function(){this.points++;var t=m(this.points);this.scoreClass(3,t[0]),this.scoreClass(2,t[1]),this.scoreClass(1,t[2]),this.points<0&&this.scoreClass(1,"-")}},{key:"removePoint",value:function(){this.points--;var t=m(this.points);this.scoreClass(3,t[0]),this.scoreClass(2,t[1]),this.scoreClass(1,t[2]),this.points<0&&this.scoreClass(1,"-")}},{key:"scoreClass",value:function(t,e){e=void 0===e?0:e;var s="#points-".concat(t);$(s).removeClass("d-");for(var i=0;i<=9;i++)$(s).removeClass("d".concat(i));$(s).addClass("d".concat(e))}}])&&y(e.prototype,s),i&&y(e,i),t}();function w(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var A=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),k("Setting up Game..."),this.debug=e,this.showBombs=e,this.rows,this.columns,this.bombs,this.setupGame()}var e,s,o;return e=t,(s=[{key:"setupGame",value:function(){$(r).empty(),$(c).empty(),$(u).empty(),$(l).empty();var t=parseInt($("#input-rows").val()),e=parseInt($("#input-columns").val()),s=parseInt($("#input-bombs").val());this.rows=t<8?8:t,this.columns=e<8?8:e,this.bombs=s<1?1:s,k(this.rows+" rows, ",this.columns+" cols, ",this.bombs+" bombs"),this.amountFields=this.rows*this.columns-this.bombs,this.bombsArray=this.createBombs(),this.boardArray=this.createBoardArray(),this.gameWon=!1,f(this.rows,this.columns),this.points=new C(this.bombs),this.timer=new g}},{key:"createBombs",value:function(){for(var t=this,e=[],s=function(s){for(var o=!1,n=void 0,a=void 0;!o;)n=Math.floor(Math.random()*t.rows),a=Math.floor(Math.random()*t.columns),e.some(function(t){return t.row===n&&t.col===a})||(o=!0);if(e.push(new i(n,a)),t.showBombs){var r="#".concat(n,"-").concat(a);$(r).toggleClass("field bomb")}},o=1;o<=this.bombs;o++)s();return k("bombsArray =>",e),e}},{key:"createBoardArray",value:function(){for(var t=[],e=0;e<this.rows;e++){t[e]=[];for(var s=0;s<this.columns;s++)t[e][s]=0}for(var i=0;i<this.bombsArray.length;i++){var o=this.bombsArray[i].row,n=this.bombsArray[i].col;t[o][n]="b",t=this.counterUpAround(o,n,t)}return k("boardArray =>",t),t}},{key:"counterUpAround",value:function(t,e,s){return s=this.counterUp(t+1,e-1,s),s=this.counterUp(t+1,e,s),s=this.counterUp(t+1,e+1,s),s=this.counterUp(t,e-1,s),s=this.counterUp(t,e+1,s),s=this.counterUp(t-1,e-1,s),s=this.counterUp(t-1,e,s),s=this.counterUp(t-1,e+1,s)}},{key:"counterUp",value:function(t,e,s){return t>=0&&t<this.rows&&e>=0&&e<this.columns&&"number"==typeof s[t][e]&&(s[t][e]=s[t][e]+1),s}},{key:"checkNoBomb",value:function(t,e){if(isNaN(t))throw new Error("Row is NaN");if(isNaN(e))throw new Error("Col is NaN");return"b"!==this.boardArray[t][e]}},{key:"blockClicked",value:function(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";""===s&&(s=b(t,e)),k("block clicked =>",s),t<0||t>=this.rows||e<0||e>=this.columns||$(s).hasClass("field")&&(this.checkNoBomb(t,e)?this.fieldClicked(t,e,s):this.bombClicked(t,e,s))}},{key:"fieldClicked",value:function(t,e,s){this.amountFields--;var i=this.boardArray[t][e];$(s).toggleClass("field f".concat(i," clicked")),$(s).attr("data-value",i),0===i&&this.clickFieldsAround(t,e),0===this.amountFields&&this.winGame()}},{key:"flagField",value:function(t){k("Flag field =>",t),$(t).hasClass("flag")?(this.points.addPoint(),$(t).removeClass("flag"),$(t).addClass("field")):(this.points.removePoint(),$(t).removeClass("field"),$(t).addClass("flag"))}},{key:"checkSurroundings",value:function(t,e){for(var s=0,i=-1;i<=1;i++)for(var o=-1;o<=1;o++)this.checkNoBomb(t+i,e+o)||s++;return s}},{key:"winGame",value:function(){if(!this.gameWon){var t=this.timer.getFinishTime();console.log("time =>",t),$(n).toggleClass("btn-smiley btn-cool");for(var e=0;e<this.bombs;e++){var s=b(this.bombsArray[e].row,this.bombsArray[e].col);$(s).hasClass("flag")||this.flagField($(s))}!function(t,e){$(scores).hasClass("hidden")&&($(scores).removeClass("hidden"),$(scores).addClass("visible")),$(scores).find("tbody:last-child").append("<tr><td>".concat(t,"</td><td>").concat(e,"</td></tr>"))}(this.rows+"x"+this.columns+", "+this.bombs+" Bombs "+this.seconds,t),this.timer.stopTimer()}this.gameWon=!0}},{key:"clickFieldsAround",value:function(t,e){this.blockClicked(t-1,e-1),this.blockClicked(t-1,e),this.blockClicked(t-1,e+1),this.blockClicked(t+1,e-1),this.blockClicked(t+1,e),this.blockClicked(t+1,e+1),this.blockClicked(t,e-1),this.blockClicked(t,e+1)}},{key:"bombClicked",value:function(t,e,s){k("bomb clicked =>",s),$(s).toggleClass("field bomb-red clicked"),this.timer.stopTimer(),$(n).removeClass("btn-smiley"),$(n).addClass("btn-dead");for(var i=0;i<this.bombs;i++)if(this.bombsArray[i].row!==t||this.bombsArray[i].col!==e){var o=b(this.bombsArray[i].row,this.bombsArray[i].col);$(o).toggleClass("field bomb")}var a=this;$(".flag").each(function(){var t=$(this).attr("id"),e=parseInt(t.split("-")[0]),s=parseInt(t.split("-")[1]);t="#"+t,a.checkNoBomb(e,s)&&$(t).toggleClass("flag no-bomb")});for(var r=1;r<=this.rows;r++)for(var c=1;c<=this.columns;c++){var l=b(r,c);$(l).addClass("clicked")}}},{key:"clearGame",value:function(){this.timer.stopTimer(),this.timer.setTimerToZero()}}])&&w(e.prototype,s),o&&w(e,o),t}();function B(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var F,T=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),F=e,this.initDomListener()}var e,s,i;return e=t,(s=[{key:"initDomListener",value:function(){$(n).mousedown(function(){$(n).removeClass("btn-smiley"),$(n).addClass("btn-click")}),$(game).mouseup(function(){$(n).hasClass("btn-wow")?($(n).removeClass("btn-wow"),$(n).addClass("btn-smiley")):$(n).hasClass("btn-click")&&($(n).removeClass("btn-click"),$(n).addClass("btn-smiley"))}),$(n).click(function(){O()}),$("input:radio").click(function(){var t=parseInt($(this).val());$(game).css("zoom",t)}),$(game).on("click",".field",function(){var t=$(this).attr("id"),e=parseInt(t.split("-")[0]),s=parseInt(t.split("-")[1]);F.blockClicked(e,s,"#".concat(t))}),$(game).on("contextmenu",".block",function(){var t=$(this).attr("id");F.flagField("#".concat(t))}),$(game).on("mousedown",".field",function(){$(n).removeClass("btn-smiley"),$(n).addClass("btn-wow")})}}])&&B(e.prototype,s),i&&B(e,i),t}();function I(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var P=0,G=0,U=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.Game=e}var e,s,i;return e=t,(s=[{key:"startAI",value:function(){for(G=0,P=0,k("start AI");!this.Game.gameWon&&G<this.Game.rows*this.Game.columns;)0===points?this.clickAllBlocks():0===P?this.randomClick():(P=0,this.goThroughClicked()),G++}},{key:"clickAllBlocks",value:function(){$(".field").each(function(){$(this).click()})}},{key:"randomClick",value:function(){var t=[];$(".field").each(function(){t.push("#"+$(this).attr("id"))});var e=Math.floor(Math.random()*t.length),s=t[e];k("random click => ",s),$(s).click(),P++}},{key:"goThroughClicked",value:function(){var t=this;$(".clicked").each(function(){var e=parseInt($(this).data("value"));if(e>0){var s=$(this).attr("id"),i=parseInt(s.split("-")[0]),o=parseInt(s.split("-")[1]),n=t.countUnclickedBlocksAround(i,o),a=t.countFlagsAround(i,o);n.length===e&&n.length>0?(flagArray(n),k("flag array =>",n.length,e),P++):a===e&&0!==a&&clickBlocksAround(i,o)}})}},{key:"countUnclickedBlocksAround",value:function(t,e){return this.checkClicked(t-1,e-1),this.checkClicked(t-1,e),this.checkClicked(t-1,e+1),this.checkClicked(t+1,e-1),this.checkClicked(t+1,e),this.checkClicked(t+1,e+1),this.checkClicked(t,e-1),this.checkClicked(t,e+1),[]}},{key:"countFlagsAround",value:function(t,e){var s=0;return s=this.checkFlag(t-1,e-1,s),s=this.checkFlag(t-1,e,s),s=this.checkFlag(t-1,e+1,s),s=this.checkFlag(t+1,e-1,s),s=this.checkFlag(t+1,e,s),s=this.checkFlag(t+1,e+1,s),s=this.checkFlag(t,e-1,s),s=this.checkFlag(t,e+1,s)}},{key:"checkClicked",value:function(t,e,s){var i=b(t,e);$(i).hasClass("tile")&&s.push(b(t,e))}},{key:"checkFlag",value:function(t,e,s){var i=b(t,e);return $(i).hasClass("block")&&$(i).hasClass("flag")&&s++,s}},{key:"flagArray",value:function(t){t.forEach(function(t){flag(t)})}},{key:"flag",value:function(t){$(t).hasClass("flag")||flagField($(t))}},{key:"clickBlock",value:function(t,e){var s=b(t,e);!$(s).hasClass("block")||$(s).hasClass("clicked")||$(s).hasClass("flag")||($(s).click(),k("click =>",s),P++)}},{key:"clickBlocksAround",value:function(t,e){clickBlock(t-1,e-1),clickBlock(t-1,e),clickBlock(t-1,e+1),clickBlock(t+1,e-1),clickBlock(t+1,e),clickBlock(t+1,e+1),clickBlock(t,e-1),clickBlock(t,e+1)}}])&&I(e.prototype,s),i&&I(e,i),t}();s.d(e,"newGame",function(){return O}),s.d(e,"debug",function(){return N});var j,N=!!window.location.href.includes("localhost");function O(){if(void 0!==j)j.clearGame(),j.setupGame();else{j=new A(N),new T(j);var t=new U(j);$("#AI").click(function(){t.startAI()})}}$(document).ready(function(){O()}),$("#newgame-btn").click(function(){O()})}]);